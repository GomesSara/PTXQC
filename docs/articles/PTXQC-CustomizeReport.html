<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customizing PTXQC reports • PTXQC</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Customizing PTXQC reports">
<meta property="og:description" content="PTXQC">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PTXQC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/PTXQC-Basic_Guide_for_R_users.html">Basic R-Usage Guide for PTXQC</a>
    </li>
    <li>
      <a href="../articles/PTXQC-CustomizeReport.html">Customizing PTXQC reports</a>
    </li>
    <li>
      <a href="../articles/PTXQC-DragNDrop.html">Drag'n'drop Usage Guide for PTXQC</a>
    </li>
    <li>
      <a href="../articles/PTXQC-FAQ.html">Frequently asked questions for PTXQC</a>
    </li>
    <li>
      <a href="../articles/PTXQC-Input_And_Output_Data.html">Input/Output data for PTXQC</a>
    </li>
    <li>
      <a href="../articles/PTXQC-ListOfMetrics.html">List of Metrics</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbielow/PTXQC/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Customizing PTXQC reports</h1>
                        <h4 data-toc-skip class="author">Chris Bielow <a href="mailto:chris.bielow@fu-berlin.de" class="email">chris.bielow@fu-berlin.de</a>
</h4>
            
            <h4 data-toc-skip class="date">2023-12-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbielow/PTXQC/blob/HEAD/../../../TEMP/R_local/PTXQC/vignettes/PTXQC-CustomizeReport.Rmd" class="external-link"><code>../../../TEMP/R_local/PTXQC/vignettes/PTXQC-CustomizeReport.Rmd</code></a></small>
      <div class="hidden name"><code>PTXQC-CustomizeReport.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="customizing-ptxqc-reports">Customizing PTXQC reports<a class="anchor" aria-label="anchor" href="#customizing-ptxqc-reports"></a>
</h2>
<p>Reports rely on a small set of parameters, which do two things:</p>
<ul>
<li>set optimal values for the PTXQC metrics and scoring functions
(usually tighly connected to the data and MS instrument)</li>
<li>report length: number of metrics shown in the report or partial
evaluation of the txt-folder</li>
</ul>
<p>The first point can partially be addressed via a <strong>mqpar.xml
file</strong>. However, not all thresholds are known or even interesting
to MaxQuant, e.g. the number of expected proteins. For this, PTXQC comes
with a <strong>YAML config file</strong>. This file also addresses the
report length.</p>
<div class="section level3">
<h3 id="automatically-importing-maxquant-parameters-via-mqpar-xml">Automatically importing MaxQuant parameters via mqpar.xml<a class="anchor" aria-label="anchor" href="#automatically-importing-maxquant-parameters-via-mqpar-xml"></a>
</h3>
<p>Some settings in MaxQuant, e.g. the MS/MS search tolerance are
important for PTXQC in order to correctly score the mass recalibration
or show expected error margins.</p>
<p>So how does PTXQC know about the settings used during the MaxQuant
run? Copy the <code>mqpar.xml</code> which MaxQuant generated in the
analysis directory into your txt folder,
e.g. <code>c:\MQ_Diabetes_study\mqpar.xml</code> -&gt;
<code>c:\MQ_Diabetes_study\combined\txt\mqpar.xml</code>. This will
enable PTXQC to extract some parameter settings and results in more
accurate reports. You will see a warning message during report
generation if <code>mqpar.xml</code> is missing. The FAQ vignette has
additional information on why this manual copying is senseful.</p>
<p>Alternatively, you can set the MaxQuant parameters manually in the
YAML file (see next section) to match your MaxQuant configuration.</p>
</div>
<div class="section level3">
<h3 id="more-customization-using-the-yaml-config-file">More customization using the YAML config file<a class="anchor" aria-label="anchor" href="#more-customization-using-the-yaml-config-file"></a>
</h3>
<p>A configuration file allows you to enable/disable certain plots, and
to modify most target thresholds used for the scoring metrics and within
plots, e.g. the number of proteins you expect. This will differ by
platform and instrument; so adapt it to your needs. The defaults are
meant for a Thermo Orbitrap Velos, a 4h LC gradient for a complex matrix
(e.g. human cells). Disabling certain report sections will decrease
report size and hide metrics which you may not need. The time required
to create the report will also reduce, but usually this is not a
bottleneck.</p>
<p>PTXQC uses YAML format for its parameter configuration. YAML is short
for ‘YAML Aint Markup Language’; yes, it’s an endless recursion. There
is a nice tutorial for YAML at [<a href="https://rhnh.net/2011/01/31/yaml-tutorial" class="external-link uri">https://rhnh.net/2011/01/31/yaml-tutorial</a>] – or just
Google to find more. Also, any PTXQC YAML file will start with a comment
section which explains the format.</p>
<p>PTXQC will create a <code>report_*.yaml</code> file within your txt
folder upon its first invocation. If you did not run PTXQC before on
this folder, you can take any other YAML config file or run PTXQC with
default settings (see above) to create such a file. Edit the YAML file
as you desire using a text editor of your choice (e.g. Notepad++).
<strong>Each YAML file has a leading comment section which will describe
the basics of how YAML looks like and what you should/not
change.</strong></p>
<blockquote>
<p>Note: PTXQC will only read the YAML file which <strong>matches its
own version exactly</strong>, i.e. <code>report_v0.82.1.yaml</code> will
be ignored if PTXQC has version <code>0.83.1</code> to avoid
compatibility problems. A new YAML file matching the current PTXQC
version will automatically be generated. If you want to use your old
settings, rename the file manually.</p>
</blockquote>
<p>The YAML shown below is shortened and lacks parts of the introductory
comment section. But in general, the YAML file will look like this:</p>
<pre><code># This is a configuration file for PTXQC reporting.
# One such file is generated automatically every time a report PDF is created.
# You can make a copy of this file, then modify its values and use the copy as an input to another round of report generation,
# e.g., to exclude/include certain plots or change some global settings.
#
# &lt;&lt; more comment text in original YAML file ... &gt;&gt;
#
PTXQC:
  UseLocalMQPar: yes
  ReportFilename:
    extended: yes
  NameLengthMax_num: 10.0
  AddPageNumbers: 'on'
order:
  qcMetric_PAR: 1.0
  qcMetric_PG_PCA: 3.0
  qcMetric_EVD_Top5Cont: 10.0
  qcMetric_PG_Ratio: 19.0
  qcMetric_EVD_UserContaminant: 20.0
  &lt;&lt; more metrics here... &gt;&gt;
File:
  Parameters:
    enabled: yes
  Summary:
    enabled: yes
    IDRate:
      Thresh_bad_num: 20.0
      Thresh_great_num: 35.0
  ProteinGroups: ...
  Evidence:
    enabled: yes
    ProteinCountThresh_num: 3500.0
    PeptideCountThresh_num: 15000.0
    MatchBetweenRuns_wA: auto</code></pre>
<p>To disable certain metrics/plots, just change the
<strong>order</strong> of the metric in question to a
<strong>negative</strong> value,
e.g. <code>qcMetric_PG_PCA: -3.0</code>, will disable the PCA plot. This
is helpful to disable uninteresting metrics, but also a temporary
solution if your PC cannot cope with RAM demands of PTXQC or a metric is
broken (you should open a bug report in this case).</p>
</div>
<div class="section level3">
<h3 id="rename-raw-files-in-the-report">Rename Raw files in the report<a class="anchor" aria-label="anchor" href="#rename-raw-files-in-the-report"></a>
</h3>
<p>PTXQC will try to shorten Raw file names to make the plot axis as
compact as possible, giving more area to show the data rather than
overly long Raw file names. It will use prefix and infix removal of
strings which are common to all Raw file names. Name your files in a
systematic to make this approach as effective as possible. Should this
shortening not reach a predefined threshold of 10 characters in length
for the longest filename after shortening, PTXQC will simply use
consecutive numbers, i.e. <strong>file 01</strong>, <strong>file
02</strong> to name your files on the axis of the plots.</p>
<p>If you do not want that, you can either:</p>
<ul>
<li>Increase this length threshold in the YAML config to force usage of
the shortened versions. But be advised that using long filenames might
result in ugly axis with overlapping text etc.</li>
<li>Use a manual mapping table: a file named
<code>report_vXXX_filename_sort.txt</code> will be created in your
txt-folder, which contains the file name mapping that PTXQC computed.
You can edit this file with any text editor and upon running PTXQC
again, this new mapping will be applied.</li>
</ul>
</div>
<div class="section level3">
<h3 id="reordering-raw-files-in-the-report">Reordering Raw files in the report<a class="anchor" aria-label="anchor" href="#reordering-raw-files-in-the-report"></a>
</h3>
<p>By default, the order of Raw files in the report is
<em>identical</em> to the order specified within MaxQuant.</p>
<p>You already read about the <code>report_vXXX_filename_sort.txt</code>
file above. It can not only be used to assign custom names, but also to
re-arrange the order in which Raw files are shown in the plots and
heatmap. Open it with a text editor and simply rearrange the rows in the
file. Easy!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Chris Bielow.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
